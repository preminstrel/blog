<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  
  <meta name="author" content="Hanshi Sun">

  
  
  <meta name="description" content="ç›®å‰ MMDetection ä¸­ Head æ¨¡å—ä¸»è¦æ˜¯æŒ‰ç…§ stage æ¥åˆ’åˆ†ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ª package: dense_heads å’Œ roi_heads ï¼Œåˆ†åˆ«å¯¹åº” two-stage ç®—æ³•ä¸­çš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ª stage æ¨¡å—ï¼Œå¦‚æœæ˜¯ one-stage ç®—æ³•åˆ™ä»…ä»…æœ‰ dense_heads è€Œå·²ã€‚ dense_heads dense_heads éƒ¨åˆ†ä¸»è¦æ˜¯æŒ‰ç…§">
  

  
  <link rel="icon" href="https://preminstrel.github.io/blog/favicon.ico">

  
  
  <meta name="keywords" content=" hugo  latex  theme ">
  

  
  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"
  integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
  integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js"
  integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: '$$', right: '$$', display: true },
        { left: '\\[', right: '\\]', display: true },
        { left: '$', right: '$', display: false },
        { left: '\\(', right: '\\)', display: false }
      ],
      ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'option'],
      throwOnError: false
    });
  });
</script>


  

  
  <meta property="og:title" content="MMDetection Head" />
<meta property="og:description" content="ç›®å‰ MMDetection ä¸­ Head æ¨¡å—ä¸»è¦æ˜¯æŒ‰ç…§ stage æ¥åˆ’åˆ†ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ª package: dense_heads å’Œ roi_heads ï¼Œåˆ†åˆ«å¯¹åº” two-stage ç®—æ³•ä¸­çš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ª stage æ¨¡å—ï¼Œå¦‚æœæ˜¯ one-stage ç®—æ³•åˆ™ä»…ä»…æœ‰ dense_heads è€Œå·²ã€‚ dense_heads dense_heads éƒ¨åˆ†ä¸»è¦æ˜¯æŒ‰ç…§" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://preminstrel.github.io/blog/post/2022/01/17/mmdetection-head/" />
<meta property="article:published_time" content="2022-01-17T13:21:36+08:00" />
<meta property="article:modified_time" content="2022-01-17T00:00:00+00:00" />


  
  <link rel="canonical" href="https://preminstrel.github.io/blog/post/2022/01/17/mmdetection-head/">

  
  
  <meta itemprop="name" content="MMDetection Head">
<meta itemprop="description" content="ç›®å‰ MMDetection ä¸­ Head æ¨¡å—ä¸»è¦æ˜¯æŒ‰ç…§ stage æ¥åˆ’åˆ†ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ª package: dense_heads å’Œ roi_heads ï¼Œåˆ†åˆ«å¯¹åº” two-stage ç®—æ³•ä¸­çš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ª stage æ¨¡å—ï¼Œå¦‚æœæ˜¯ one-stage ç®—æ³•åˆ™ä»…ä»…æœ‰ dense_heads è€Œå·²ã€‚ dense_heads dense_heads éƒ¨åˆ†ä¸»è¦æ˜¯æŒ‰ç…§">
<meta itemprop="datePublished" content="2022-01-17T13:21:36&#43;08:00" />
<meta itemprop="dateModified" content="2022-01-17T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="2877">



<meta itemprop="keywords" content="Object Detection,Deep Learning,MMDetection," />

  
  <link media="screen" rel="stylesheet" href='https://preminstrel.github.io/blog/css/common.css'>
  <link media="screen" rel="stylesheet" href='https://preminstrel.github.io/blog/css/content.css'>

  
  
  <title>MMDetection Head - Blog de Preminstrel</title>
  

  
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MMDetection Head"/>
<meta name="twitter:description" content="ç›®å‰ MMDetection ä¸­ Head æ¨¡å—ä¸»è¦æ˜¯æŒ‰ç…§ stage æ¥åˆ’åˆ†ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ª package: dense_heads å’Œ roi_heads ï¼Œåˆ†åˆ«å¯¹åº” two-stage ç®—æ³•ä¸­çš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ª stage æ¨¡å—ï¼Œå¦‚æœæ˜¯ one-stage ç®—æ³•åˆ™ä»…ä»…æœ‰ dense_heads è€Œå·²ã€‚ dense_heads dense_heads éƒ¨åˆ†ä¸»è¦æ˜¯æŒ‰ç…§"/>


  
<link rel="stylesheet" href='https://preminstrel.github.io/blog/css/single.css'>

</head>

<body>
  <div id="wrapper">
    <header id="header">
  <h1>
    <a href="https://preminstrel.github.io/blog/">Blog de Preminstrel</a>
  </h1>

  <nav>
    
    <span class="nav-bar-item">
      <a class="link" href="/blog/">Post</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/blog/post/">Archives</a>
    </span>
    
    <span class="nav-bar-item">
      <a class="link" href="/blog/about/">About</a>
    </span>
    
  </nav>
</header>

    
<main id="main" class="post">
  
  
  <h1>MMDetection Head</h1>
  
  <div>
    <b>Keywords: </b>
    
    <a class="link" href='https://preminstrel.github.io/blog/tags/object-detection'>#Object Detection</a>
    
    <a class="link" href='https://preminstrel.github.io/blog/tags/deep-learning'>#Deep Learning</a>
    
    <a class="link" href='https://preminstrel.github.io/blog/tags/mmdetection'>#MMDetection</a>
    
  </div>
  
  
  <article class="content">
    
    <div align=center>
<img src="/img/20220117132300.jpg" width="700px"/>
</div>
<p>ç›®å‰ MMDetection ä¸­ Head æ¨¡å—ä¸»è¦æ˜¯æŒ‰ç…§ stage æ¥åˆ’åˆ†ï¼Œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ª package: <code>dense_heads</code> å’Œ <code>roi_heads</code> ï¼Œåˆ†åˆ«å¯¹åº” two-stage ç®—æ³•ä¸­çš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ª stage æ¨¡å—ï¼Œå¦‚æœæ˜¯ one-stage ç®—æ³•åˆ™ä»…ä»…æœ‰ <code>dense_heads</code> è€Œå·²ã€‚</p>
<ul>
<li>
<p><em><strong>dense_heads</strong></em></p>
<p><code>dense_heads</code> éƒ¨åˆ†ä¸»è¦æ˜¯æŒ‰ç…§  <em><strong>anchor-based</strong></em> å’Œ <em><strong>anchor-free</strong></em> æ¥åˆ’åˆ†ï¼Œå¯¹åº”çš„ç±»æ˜¯ AnchorHead å’Œ AnchorFreeHead, è¿™ä¸¤ä¸ªç±»ä¸»è¦åŒºåˆ«æ˜¯ AnchorHead ä¼šé¢å¤–éœ€è¦ <code>anchor_generator</code> é…ç½®ï¼Œç”¨äºç”Ÿæˆé»˜è®¤ anchorã€‚</p>
<p>åŒæ—¶å¯ä»¥çœ‹åˆ°æœ‰äº›ç±»å¹¶æ²¡æœ‰ç›´æ¥ç»§æ‰¿è¿™ä¸¤ä¸ªåŸºç±»ï¼Œä¾‹å¦‚ YOLOV3Headã€‚åŸå› æ˜¯åœ¨è¯¥ç±»ä¸­å¤§éƒ¨åˆ†å‡½æ•°å¤„ç†é€»è¾‘éƒ½éœ€è¦å¤å†™ï¼Œä¸ºäº†ç®€å•å°±ç›´æ¥ç»§æ‰¿äº† <code>BaseDenseHead</code>ï¼Œè€Œå¯¹äº SABLRetinaHead è€Œè¨€ï¼Œç”±äº SABL æ˜¯ç±»ä¼¼ anchor-based å’Œ anchor-free æ··åˆçš„ç®—æ³•ï¼Œæ•…ç›´æ¥ç»§æ‰¿ <code>BaseDenseHead</code> æ˜¯æœ€åˆé€‚çš„åšæ³•ã€‚ç”¨æˆ·å¦‚æœè¦è¿›è¡Œæ‰©å±•å¼€å‘ï¼Œå¯ä»¥ä¾æ®å¼€å‘ä¾¿æ·åº¦è‡ªç”±é€‰æ‹©æœ€åˆé€‚çš„åŸºç±»è¿›è¡Œç»§æ‰¿ã€‚</p>
</li>
<li>
<p><em><strong>roi_heads</strong></em></p>
<p><code>roi_heads</code> éƒ¨åˆ†ä¸»è¦æ˜¯æŒ‰ç…§ç¬¬äºŒé˜¶æ®µå†…éƒ¨çš„ stage ä¸ªæ•°æ¥åˆ’åˆ†ï¼Œç»å…¸çš„ Faster R-CNN é‡‡ç”¨çš„æ˜¯ StandardRoIHeadï¼Œè¡¨ç¤ºè¿›è¡Œä¸€æ¬¡å›å½’å³å¯ï¼Œè€Œå¯¹äº Cascade R-CNNï¼Œå…¶ç¬¬äºŒé˜¶æ®µå†…éƒ¨ä¹ŸåŒ…æ‹¬å¤šä¸ª stage å›å½’é˜¶æ®µï¼Œå®ç°äº† CascadeRoIHeadï¼Œå³å¯ä»¥æ„å»ºä»»æ„æ¬¡æ•°çš„åˆ†ç±»å›å½’ç»“æœã€‚</p>
</li>
</ul>
<p>æ€»ç»“æ¥è¯´ï¼Œæ¯ä¸ª Head å†…éƒ¨éƒ½å¯èƒ½åŒ…æ‹¬:</p>
<ol>
<li>RoI ç‰¹å¾æå–å™¨ <code>roi_extractor</code></li>
<li>å…±äº«æ¨¡å— <code>shared_heads</code></li>
<li>bbox åˆ†ç±»å›å½’æ¨¡å— <code>bbox_heads</code></li>
<li>mask é¢„æµ‹æ¨¡å— <code>mask_heads</code></li>
</ol>
<p>å…¶ä¸­ 1ã€3æ˜¯<strong class=chinese>å¿…å¤‡æ¨¡å—</strong>ã€‚</p>
<h1 id="head-æ¨¡å—æ„å»ºæµç¨‹">Head æ¨¡å—æ„å»ºæµç¨‹</h1>
<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œé¦–å…ˆéœ€è¦å›é¡¾ä¸‹ MMDetection è®­ç»ƒå’Œæµ‹è¯•æµç¨‹ï¼Œç„¶åå†å¯¹æ¯ä¸ª Head æ¨¡å—è¿›è¡Œæ·±å…¥åˆ†æã€‚</p>
<h2 id="train--test-of-mmd">Train &amp; Test of MMD</h2>
<ul>
<li>
<p><strong class=chinese>è®­ç»ƒæµç¨‹</strong></p>
<p>å¯¹åº” two-stage è€Œè¨€ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-style:italic">#============= mmdet/models/detectors/two_stage.py/TwoStageDetector ============</span>
<span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">forward_train</span>(<span style="color:#666">...</span>):
    <span style="color:#080;font-style:italic"># å…ˆè¿›è¡Œ backbone+neck çš„ç‰¹å¾æå–</span>
    x <span style="color:#666">=</span> self<span style="color:#666">.</span>extract_feat(img)
    losses <span style="color:#666">=</span> <span style="color:#a2f">dict</span>()
    <span style="color:#080;font-style:italic"># RPN forward and loss</span>
    <span style="color:#a2f;font-weight:bold">if</span> self<span style="color:#666">.</span>with_rpn:
        <span style="color:#080;font-style:italic"># è®­ç»ƒ RPN</span>
        proposal_cfg <span style="color:#666">=</span> self<span style="color:#666">.</span>train_cfg<span style="color:#666">.</span>get(<span style="color:#b44">&#39;rpn_proposal&#39;</span>,
                                        self<span style="color:#666">.</span>test_cfg<span style="color:#666">.</span>rpn)
        <span style="color:#080;font-style:italic"># ä¸»è¦æ˜¯è°ƒç”¨ rpn_head å†…éƒ¨çš„ forward_train æ–¹æ³•</span>
        rpn_losses, proposal_list <span style="color:#666">=</span> self<span style="color:#666">.</span>rpn_head<span style="color:#666">.</span>forward_train(x,<span style="color:#666">...</span>)
        losses<span style="color:#666">.</span>update(rpn_losses)
    <span style="color:#a2f;font-weight:bold">else</span>:
        proposal_list <span style="color:#666">=</span> proposals
    <span style="color:#080;font-style:italic"># ç¬¬äºŒé˜¶æ®µï¼Œä¸»è¦æ˜¯è°ƒç”¨ roi_head å†…éƒ¨çš„ forward_train æ–¹æ³•</span>
    roi_losses <span style="color:#666">=</span> self<span style="color:#666">.</span>roi_head<span style="color:#666">.</span>forward_train(x, <span style="color:#666">...</span>)
    losses<span style="color:#666">.</span>update(roi_losses)
    <span style="color:#a2f;font-weight:bold">return</span> losses
</code></pre></div><p>Head æ¨¡å—æ ¸å¿ƒæ˜¯è°ƒç”¨ <code>self.rpn_head.forward_train</code> å’Œ <code>self.roi_head.forward_train</code> å‡½æ•°ï¼Œè¾“å‡º losses å’Œå…¶ä»–ç›¸å…³æ•°æ®ã€‚</p>
<p>å¯¹äº one-stage è€Œè¨€ï¼Œå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-style:italic">#============= mmdet/models/detectors/single_stage.py/SingleStageDetector ============</span>
<span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">forward_train</span>(<span style="color:#666">...</span>):
    <span style="color:#a2f">super</span>(SingleStageDetector, self)<span style="color:#666">.</span>forward_train(img, img_metas)
    <span style="color:#080;font-style:italic"># å…ˆè¿›è¡Œ backbone+neck çš„ç‰¹å¾æå–</span>
    x <span style="color:#666">=</span> self<span style="color:#666">.</span>extract_feat(img)
    <span style="color:#080;font-style:italic"># ä¸»è¦æ˜¯è°ƒç”¨ bbox_head å†…éƒ¨çš„ forward_train æ–¹æ³•</span>
    losses <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_head<span style="color:#666">.</span>forward_train(x, <span style="color:#666">...</span>)
    <span style="color:#a2f;font-weight:bold">return</span> losses
</code></pre></div><p>è¿™ä¸ªæ¯” two-stage Head æ¨¡å—ç®€å•ï¼Œå› ä¸ºå…¶åªæœ‰ç¬¬ä¸€ä¸ª stageï¼Œå¯¹åº”çš„å‡½æ•°æ˜¯ <code>self.bbox_head.forward_train</code>ã€‚</p>
<ul>
<li><strong class=chinese>æµ‹è¯•æµç¨‹</strong></li>
</ul>
<ol>
<li>è°ƒç”¨ MMDataParallel æˆ– MMDistributedDataParallel ä¸­çš„ <code>forward</code> æ–¹æ³•</li>
<li>è°ƒç”¨ base.py ä¸­çš„ <code>forward</code> æ–¹æ³•</li>
<li>è°ƒç”¨ base.py ä¸­çš„ <code>self.forward_test</code> æ–¹æ³•</li>
<li>å¦‚æœæ˜¯å•å°ºåº¦æµ‹è¯•ï¼Œåˆ™ä¼šè°ƒç”¨ TwoStageDetector æˆ– SingleStageDetector ä¸­çš„ <code>simple_test</code> æ–¹æ³•ï¼Œå¦‚æœæ˜¯å¤šå°ºåº¦æµ‹è¯•ï¼Œåˆ™è°ƒç”¨ <code>aug_test</code> æ–¹æ³•</li>
<li>æœ€ç»ˆè°ƒç”¨çš„æ˜¯æ¯ä¸ªå…·ä½“ Head æ¨¡å—çš„ <code>simple_test</code> æˆ–è€… <code>aug_test</code> æ–¹æ³•(one-stage å’Œ two-stage çš„ head è°ƒç”¨é€»è¾‘æœ‰äº›åŒºåˆ«)</li>
</ol>
<p>å¯ä»¥çœ‹å‡ºåœ¨æµ‹è¯•é˜¶æ®µï¼Œä¸»è¦æ˜¯è°ƒç”¨äº† Head æ¨¡å—è‡ªèº«çš„ <code>simple_test</code> æˆ– <code>aug_test</code> æ–¹æ³•ã€‚</p>
<h2 id="dense_heads">dense_heads</h2>
<h3 id="train">Train</h3>
<p><code>dense_heads</code> è®­ç»ƒæµç¨‹æœ€å¤–å±‚å‡½æ•°æ˜¯ <code>forward_train</code>, å…¶å®ç°æ˜¯åœ¨ <code>mmdet/models/dense_heads/base_dense_head.py/BaseDenseHead</code> ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">forward_train</span>(self,
                  x,
                  img_metas,
                  gt_bboxes,
                  gt_labels<span style="color:#666">=</span>None,
                  gt_bboxes_ignore<span style="color:#666">=</span>None,
                  proposal_cfg<span style="color:#666">=</span>None,
                  <span style="color:#666">**</span>kwargs):
    <span style="color:#080;font-style:italic"># è°ƒç”¨å„ä¸ªå­ç±»å®ç°çš„ forward æ–¹æ³•</span>
    outs <span style="color:#666">=</span> self(x)
    <span style="color:#a2f;font-weight:bold">if</span> gt_labels <span style="color:#a2f;font-weight:bold">is</span> None:
        loss_inputs <span style="color:#666">=</span> outs <span style="color:#666">+</span> (gt_bboxes, img_metas)
    <span style="color:#a2f;font-weight:bold">else</span>:
        loss_inputs <span style="color:#666">=</span> outs <span style="color:#666">+</span> (gt_bboxes, gt_labels, img_metas)
    <span style="color:#080;font-style:italic"># è°ƒç”¨å„ä¸ªå­ç±»å®ç°çš„ loss è®¡ç®—æ–¹æ³•</span>
    losses <span style="color:#666">=</span> self<span style="color:#666">.</span>loss(<span style="color:#666">*</span>loss_inputs, gt_bboxes_ignore<span style="color:#666">=</span>gt_bboxes_ignore)
    <span style="color:#a2f;font-weight:bold">if</span> proposal_cfg <span style="color:#a2f;font-weight:bold">is</span> None:
        <span style="color:#a2f;font-weight:bold">return</span> losses
    <span style="color:#a2f;font-weight:bold">else</span>:
        <span style="color:#080;font-style:italic"># two-stage ç®—æ³•è¿˜éœ€è¦è¿”å› proposal</span>
        proposal_list <span style="color:#666">=</span> self<span style="color:#666">.</span>get_bboxes(<span style="color:#666">*</span>outs, img_metas, cfg<span style="color:#666">=</span>proposal_cfg)
        <span style="color:#a2f;font-weight:bold">return</span> losses, proposal_list
</code></pre></div><p>æ¯ä¸ªç®—æ³•çš„ Head å­ç±»ä¸€èˆ¬ä¸ä¼šé‡å†™ä¸Šè¿°æ–¹æ³•ï¼Œ<strong>ä½†æ˜¯æ¯ä¸ª Head å­ç±»éƒ½ä¼šé‡å†™ <code>forward</code> å’Œ <code>loss</code> æ–¹æ³•</strong>ï¼Œå…¶ä¸­ <code>forward</code> æ–¹æ³•ç”¨äºè¿è¡Œ Head ç½‘ç»œéƒ¨åˆ†è¾“å‡ºåˆ†ç±»å›å½’åˆ†æ”¯çš„ç‰¹å¾å›¾ï¼Œè€Œ <code>loss</code> æ–¹æ³•æ¥æ”¶ <code>forward</code> è¾“å‡ºï¼Œå¹¶ä¸”ç»“åˆ label è®¡ç®— lossã€‚</p>
<p><strong>(1) BaseDenseHead</strong></p>
<p><code>BaseDenseHead</code> åŸºç±»è¿‡äºç®€å•ï¼Œå¯¹äº anchor-based å’Œ anchor-free ç®—æ³•åˆè¿›ä¸€æ­¥è¿›è¡Œäº†ç»§æ‰¿ï¼Œå¾—åˆ° <code>AnchorHead</code> æˆ–è€… <code>AnchorFreeHead</code> ç±»ã€‚åœ¨ç›®å‰çš„å„ç±»ç®—æ³•å®ç°ä¸­ï¼Œç»å¤§éƒ¨åˆ†å­ç±»éƒ½æ˜¯ç»§æ‰¿è‡ª <code>AnchorHead</code> æˆ–è€… <code>AnchorFreeHead</code>ï¼Œå…¶æä¾›äº†ä¸€äº›ç›¸å…³çš„é»˜è®¤æ“ä½œï¼Œå¦‚æœç›´æ¥ç»§æ‰¿ <code>BaseDenseHead</code> åˆ™å­ç±»éœ€è¦é‡å†™å¤§éƒ¨åˆ†ç®—æ³•é€»è¾‘ã€‚</p>
<p><strong>(2) AnchorHead</strong></p>
<p>é¦–å…ˆåˆ†æ <code>AnchorHead</code>ï¼Œå…¶ä¸»è¦æ˜¯å°è£…äº† anchor ç”Ÿæˆè¿‡ç¨‹ã€‚ä¸‹é¢å¯¹ <code>forward</code> å’Œ <code>loss</code> å‡½æ•°è¿›è¡Œåˆ†æ</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-style:italic"># BBoxTestMixin æ˜¯å¤šå°ºåº¦æµ‹è¯•æ—¶å€™è°ƒç”¨</span>
<span style="color:#a2f;font-weight:bold">class</span> <span style="color:#00f">AnchorHead</span>(BaseDenseHead, BBoxTestMixin):
    <span style="color:#080;font-style:italic"># feats æ˜¯ backbone+neck è¾“å‡ºçš„å¤šä¸ªå°ºåº¦å›¾</span>
    <span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">forward</span>(self, feats):
        <span style="color:#080;font-style:italic"># å¯¹æ¯å¼ ç‰¹å¾å›¾å•ç‹¬è®¡ç®—é¢„æµ‹è¾“å‡º</span>
        <span style="color:#a2f;font-weight:bold">return</span> multi_apply(self<span style="color:#666">.</span>forward_single, feats)

    <span style="color:#080;font-style:italic"># head æ¨¡å—åˆ†ç±»å›å½’åˆ†æ”¯è¾“å‡º</span>
    <span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">forward_single</span>(self, x):
        cls_score <span style="color:#666">=</span> self<span style="color:#666">.</span>conv_cls(x)
        bbox_pred <span style="color:#666">=</span> self<span style="color:#666">.</span>conv_reg(x)
        <span style="color:#a2f;font-weight:bold">return</span> cls_score, bbox_pred
</code></pre></div><p><code>forward</code> å‡½æ•°æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å¯¹å¤šå°ºåº¦ç‰¹å¾å›¾ä¸­æ¯ä¸ªç‰¹å¾å›¾åˆ†åˆ«è®¡ç®—åˆ†ç±»å’Œå›å½’è¾“å‡ºå³å¯ï¼Œä¸»è¦å¤æ‚åº¦åœ¨ loss å‡½æ•°ä¸­ï¼Œå…¶è¿è¡Œæµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div align=center>
<img src="/img/20220117135200.jpg" width="700px"/>
</div>
<ul>
<li>åœ¨ loss å‡½æ•°ä¸­é¦–å…ˆä¼šè°ƒç”¨ <code>get_anchors</code> å‡½æ•°å¾—åˆ°é»˜è®¤ anchor åˆ—è¡¨ã€‚è€Œ <code>get_anchors</code> å‡½æ•°å†…éƒ¨ä¼šå…ˆè®¡ç®—å¤šå°ºåº¦ç‰¹å¾å›¾ä¸Šæ¯ä¸ªç‰¹å¾ç‚¹ä½ç½®çš„ anchorï¼Œç„¶åå†è®¡ç®—æœ‰æ•ˆ anchor æ ‡å¿—(å› ä¸ºåœ¨ç»„ç»‡ batch æ—¶å€™æœ‰äº›å›¾ç‰‡ä¼šè¿›è¡Œå·¦ä¸Šè§’ paddingï¼Œè¿™éƒ¨åˆ†åƒç´ äººä¸ºåŠ çš„ï¼Œä¸éœ€è¦è€ƒè™‘ anchor)</li>
<li>ç„¶ååŸºäº anchorã€gt bbox ä»¥åŠå…¶ä»–å¿…å¤‡ä¿¡æ¯è°ƒç”¨ <code>get_targets</code> å‡½æ•°è®¡ç®—æ¯ä¸ªé¢„æµ‹åˆ†æ”¯å¯¹åº”çš„ targetã€‚<code>get_targets</code> å‡½æ•°å†…éƒ¨ä¼šè°ƒç”¨ <code>multi_apply(_get_targets_single)</code> å‡½æ•°å¯¹æ¯å¼ å›¾ç‰‡å•ç‹¬è®¡ç®— targetï¼Œè€Œ <code>_get_targets_single</code> å‡½æ•°å®ç°çš„åŠŸèƒ½æ¯”è¾ƒå¤šï¼ŒåŒ…æ‹¬ï¼šbbox assignerã€bbox sampler å’Œ bbox encoder ä¸‰ä¸ªå…³é”®ç¯èŠ‚</li>
<li>åœ¨å¾—åˆ° targets åï¼Œè°ƒç”¨ <code>loss_single</code> å‡½æ•°è®¡ç®—æ¯ä¸ªè¾“å‡ºå°ºåº¦çš„ loss å€¼ï¼Œæœ€ç»ˆè¿”å›å„ä¸ªåˆ†æ”¯çš„ loss</li>
</ul>
<p><strong>(3) AnchorFreeHead</strong></p>
<p><code>AnchorFreeHead</code> é€»è¾‘æ¯” <code>AnchorHead</code> ç®€å•å¾ˆå¤šï¼Œä¸»è¦æ˜¯å› ä¸º anchor-free ç±»ç®—æ³•æ¯” anchor-based ç®—æ³•æ›´åŠ çµæ´»å¤šå˜ï¼Œè€Œä¸”å°‘äº†å¤æ‚çš„ anchor ç”Ÿæˆè¿‡ç¨‹ï¼Œå…¶ <code>forward</code> æ–¹æ³•å®ç°å’Œ <code>AnchorHead</code> å®Œå…¨ç›¸åŒï¼Œè€Œ <code>loss</code> æ–¹æ³•æ²¡æœ‰å®ç°ï¼Œå…¶å­ç±»å¿…é¡»å®ç°ã€‚</p>
<h3 id="test">Test</h3>
<p>å‰é¢è¯´è¿‡åœ¨æµ‹è¯•æµç¨‹ä¸­ï¼Œæœ€ç»ˆä¼šè°ƒç”¨ Head æ¨¡å—çš„ <code>simple_test</code> æˆ– <code>aug_test</code> æ–¹æ³•åˆ†åˆ«è¿›è¡Œå•å°ºåº¦å’Œå¤šå°ºåº¦æµ‹è¯•ï¼Œæ¶‰åŠåˆ°å…·ä½“ä»£ç å±‚é¢ï¼Œone-stage å’Œ two-stage è°ƒç”¨å‡½æ•°æœ‰åŒºåˆ«ï¼Œä½†æ˜¯æœ€ç»ˆè°ƒç”¨çš„ä¾ç„¶æ˜¯ Head æ¨¡å—çš„ <code>get_bboxes</code> æ–¹æ³•ã€‚</p>
<p><strong>(1) AnchorHead</strong></p>
<p>åœ¨å•å°ºåº¦æµ‹è¯•æ¨¡å¼ä¸‹ï¼Œå¯¹äº one-stage è€Œè¨€ï¼Œæ˜¯ç›´æ¥è°ƒç”¨ <code>self.bbox_head.get_bboxes</code> æ–¹æ³•ï¼Œå¦‚æœæ˜¯ <code>AnchorHead</code>ï¼Œå…¶æµç¨‹æ˜¯ï¼š</p>
<ol>
<li>éå†æ¯ä¸ªç‰¹å¾å°ºåº¦è¾“å‡ºåˆ†æ”¯ï¼Œåˆ©ç”¨ <code>nms_pre</code> é…ç½®å‚æ•°å¯¹è¯¥å±‚é¢„æµ‹ç»“æœæŒ‰ç…§ scores å€¼è¿›è¡Œä»å¤§åˆ°å°è¿›è¡Œ topk æˆªå–ï¼Œä¿ç•™ scores æœ€é«˜çš„å‰ <code>nms_pre</code> çš„é¢„æµ‹ç»“æœ</li>
<li>å¯¹ä¿ç•™çš„é¢„æµ‹ç»“æœè¿›è¡Œ bbox è§£ç è¿˜åŸæ“ä½œ</li>
<li>è¿˜åŸåˆ°æœ€åŸå§‹å›¾ç‰‡å°ºåº¦</li>
<li>å¦‚æœéœ€è¦è¿›è¡Œ nmsï¼Œåˆ™å¯¹æ‰€æœ‰åˆ†æ”¯é¢„æµ‹ä¿ç•™ç»“æœè¿›è¡Œç»Ÿä¸€ nms å³å¯ï¼Œå¦åˆ™ç›´æ¥å±äºå¤šå°ºåº¦é¢„æµ‹ç»“æœ</li>
</ol>
<p>å¯¹äº two-stage è€Œè¨€ï¼Œå…¶ç¬¬ä¸€é˜¶æ®µ Head æ¨ç†æ˜¯ç›´æ¥è°ƒç”¨äº† <code>simple_test_rpn</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å†…éƒ¨æœ€ç»ˆä¹Ÿæ˜¯è°ƒç”¨äº† <code>AnchorHead</code> ä¸­çš„<code>get_bboxes</code> æ–¹æ³•ã€‚</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#080;font-style:italic"># mmdet/models/dense_heads/rpn_test_mixin.py/RPNTestMixin</span>
<span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">simple_test_rpn</span>(self, x, img_metas):
    rpn_outs <span style="color:#666">=</span> self(x)
    proposal_list <span style="color:#666">=</span> self<span style="color:#666">.</span>get_bboxes(<span style="color:#666">*</span>rpn_outs, img_metas)
    <span style="color:#a2f;font-weight:bold">return</span> proposal_list
</code></pre></div><p><strong>(2) AnchorFreeHead</strong></p>
<p><code>AnchorFreeHead</code> æ¯”è¾ƒçµæ´»ï¼Œ <code>get_bboxes</code> éƒ½æ˜¯ç”±å…·ä½“ç®—æ³•å­ç±»å®ç°ã€‚</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">get_bboxes</span>(self,
               cls_scores,
               bbox_preds,
               img_metas,
               cfg<span style="color:#666">=</span>None,
               rescale<span style="color:#666">=</span>None):
    <span style="color:#a2f;font-weight:bold">raise</span> <span style="color:#d2413a;font-weight:bold">NotImplementedError</span>
</code></pre></div><p><strong>(3) å¤šå°ºåº¦æµ‹è¯•</strong></p>
<p>é™¤äº† RPN ç®—æ³•çš„å¤šå°ºåº¦æµ‹è¯•æ˜¯åœ¨<code>mmdet/models/dense_heads/rpn_test_mixin.py</code>ï¼Œå…¶ä½™ Head å¤šå°ºåº¦æµ‹è¯•éƒ½æ˜¯åœ¨ <code>mmdet/models/dense_heads/dense_test_mixins.py/BBoxTestMixin</code> ä¸­å®ç°ï¼Œå…¶æ€è·¯æ˜¯å¯¹å¤šå°ºåº¦å›¾ç‰‡ä¸­æ¯å¼ å›¾ç‰‡å•ç‹¬è¿è¡Œ <code>get_bboxes</code>ï¼Œç„¶åè¿˜åŸåˆ°åŸå›¾å°ºåº¦ï¼Œæœ€åæŠŠå¤šå°ºåº¦å›¾ç‰‡é¢„æµ‹ç»“æœåˆå¹¶è¿›è¡Œç»Ÿä¸€ nmsã€‚</p>
<h2 id="roi_heads">roi_heads</h2>
<p>ä»¥æœ€å¸¸ç”¨çš„ StandardRoIHead ä¸ºä¾‹è¿›è¡Œåˆ†æã€‚</p>
<h3 id="train-1">Train</h3>
<p>è®­ç»ƒæµç¨‹æœ€å¤–å±‚ä¾ç„¶æ˜¯è°ƒç”¨ <code>forward_train</code>, å…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">forward_train</span>(self,
                  x,
                  img_metas,
                  proposal_list,
                  gt_bboxes,
                  gt_labels,
                  <span style="color:#666">...</span>):
    <span style="color:#a2f;font-weight:bold">if</span> self<span style="color:#666">.</span>with_bbox <span style="color:#a2f;font-weight:bold">or</span> self<span style="color:#666">.</span>with_mask:
        num_imgs <span style="color:#666">=</span> <span style="color:#a2f">len</span>(img_metas)
        sampling_results <span style="color:#666">=</span> []
        <span style="color:#a2f;font-weight:bold">for</span> i <span style="color:#a2f;font-weight:bold">in</span> <span style="color:#a2f">range</span>(num_imgs):
            <span style="color:#080;font-style:italic"># å¯¹æ¯å¼ å›¾ç‰‡è¿›è¡Œ bbox æ­£è´Ÿæ ·æœ¬å±æ€§åˆ†é…</span>
            assign_result <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_assigner<span style="color:#666">.</span>assign(
                proposal_list[i], <span style="color:#666">...</span>)
            <span style="color:#080;font-style:italic"># ç„¶åè¿›è¡Œæ­£è´Ÿæ ·æœ¬é‡‡æ ·</span>
            sampling_result <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_sampler<span style="color:#666">.</span>sample(
                assign_result,
                proposal_list[i],
                <span style="color:#666">...</span>)
            sampling_results<span style="color:#666">.</span>append(sampling_result)
    losses <span style="color:#666">=</span> <span style="color:#a2f">dict</span>()

    <span style="color:#a2f;font-weight:bold">if</span> self<span style="color:#666">.</span>with_bbox:
        <span style="color:#080;font-style:italic"># bbox åˆ†æ”¯ forwardï¼Œè¿”å› loss</span>
        bbox_results <span style="color:#666">=</span> self<span style="color:#666">.</span>_bbox_forward_train(<span style="color:#666">...</span>)
        losses<span style="color:#666">.</span>update(bbox_results[<span style="color:#b44">&#39;loss_bbox&#39;</span>])

    <span style="color:#a2f;font-weight:bold">if</span> self<span style="color:#666">.</span>with_mask:
        <span style="color:#080;font-style:italic"># mask åˆ†æ”¯ forward,è¿”å› loss</span>
    <span style="color:#a2f;font-weight:bold">return</span> losses


<span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">_bbox_forward_train</span>(self, x, sampling_results, gt_bboxes, gt_labels,
                        img_metas):
    rois <span style="color:#666">=</span> bbox2roi([res<span style="color:#666">.</span>bboxes <span style="color:#a2f;font-weight:bold">for</span> res <span style="color:#a2f;font-weight:bold">in</span> sampling_results])
    <span style="color:#080;font-style:italic"># forward</span>
    bbox_results <span style="color:#666">=</span> self<span style="color:#666">.</span>_bbox_forward(x, rois)
    <span style="color:#080;font-style:italic"># è®¡ç®— target</span>
    bbox_targets <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_head<span style="color:#666">.</span>get_targets(<span style="color:#666">...</span>)  
    <span style="color:#080;font-style:italic"># è®¡ç®— loss                                          </span>
    loss_bbox <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_head<span style="color:#666">.</span>loss(<span style="color:#666">...</span>)
    <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">...</span>    

<span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">_bbox_forward</span>(self, x, rois):
    <span style="color:#080;font-style:italic"># roi æå–</span>
    bbox_feats <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_roi_extractor(
        x[:self<span style="color:#666">.</span>bbox_roi_extractor<span style="color:#666">.</span>num_inputs], rois)
    <span style="color:#080;font-style:italic"># bbox head ç½‘ç»œå‰å‘</span>
    cls_score, bbox_pred <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_head(bbox_feats)
    <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#666">...</span>
</code></pre></div><p>ä»ä¸Šè¿°é€»è¾‘å¯ä»¥çœ‹å‡ºï¼Œ<code>StandardRoIHead</code> ä¸­ <code>forward_train</code> å‡½æ•°ä»…ä»…æ˜¯å¯¹å†…éƒ¨çš„ <code>bbox_head</code> ç›¸å…³å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œä¾‹å¦‚ <code>get_targets</code> å’Œ <code>loss</code>ï¼Œæœ¬èº« StandardRoIHead ç±»ä¸åšå…·ä½“ç®—æ³•é€»è¾‘è®¡ç®—ã€‚</p>
<p>å¯ä»¥å‚è€ƒ Faster R-CNN é…ç½®æ–‡ä»¶ç†è§£ <code>StandardRoIHead</code> å’Œ <code>bbox_head</code> çš„å…³ç³»ï¼š</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">roi_head<span style="color:#666">=</span><span style="color:#a2f">dict</span>(
    <span style="color:#a2f">type</span><span style="color:#666">=</span><span style="color:#b44">&#39;StandardRoIHead&#39;</span>,
    bbox_roi_extractor<span style="color:#666">=</span><span style="color:#a2f">dict</span>(
        <span style="color:#a2f">type</span><span style="color:#666">=</span><span style="color:#b44">&#39;SingleRoIExtractor&#39;</span>,
        roi_layer<span style="color:#666">=</span><span style="color:#a2f">dict</span>(<span style="color:#a2f">type</span><span style="color:#666">=</span><span style="color:#b44">&#39;RoIAlign&#39;</span>, output_size<span style="color:#666">=</span><span style="color:#666">7</span>, sampling_ratio<span style="color:#666">=</span><span style="color:#666">0</span>),
        out_channels<span style="color:#666">=</span><span style="color:#666">256</span>,
        featmap_strides<span style="color:#666">=</span>[<span style="color:#666">4</span>, <span style="color:#666">8</span>, <span style="color:#666">16</span>, <span style="color:#666">32</span>]),
    bbox_head<span style="color:#666">=</span><span style="color:#a2f">dict</span>(
        <span style="color:#a2f">type</span><span style="color:#666">=</span><span style="color:#b44">&#39;Shared2FCBBoxHead&#39;</span>,
        in_channels<span style="color:#666">=</span><span style="color:#666">256</span>,
        fc_out_channels<span style="color:#666">=</span><span style="color:#666">1024</span>,
        roi_feat_size<span style="color:#666">=</span><span style="color:#666">7</span>,
        num_classes<span style="color:#666">=</span><span style="color:#666">80</span>,
        bbox_coder<span style="color:#666">=</span><span style="color:#a2f">dict</span>(
            <span style="color:#a2f">type</span><span style="color:#666">=</span><span style="color:#b44">&#39;DeltaXYWHBBoxCoder&#39;</span>,
            target_means<span style="color:#666">=</span>[<span style="color:#666">0.</span>, <span style="color:#666">0.</span>, <span style="color:#666">0.</span>, <span style="color:#666">0.</span>],
            target_stds<span style="color:#666">=</span>[<span style="color:#666">0.1</span>, <span style="color:#666">0.1</span>, <span style="color:#666">0.2</span>, <span style="color:#666">0.2</span>]),
        reg_class_agnostic<span style="color:#666">=</span>False,
        loss_cls<span style="color:#666">=</span><span style="color:#a2f">dict</span>(
            <span style="color:#a2f">type</span><span style="color:#666">=</span><span style="color:#b44">&#39;CrossEntropyLoss&#39;</span>, use_sigmoid<span style="color:#666">=</span>False, loss_weight<span style="color:#666">=</span><span style="color:#666">1.0</span>),
        loss_bbox<span style="color:#666">=</span><span style="color:#a2f">dict</span>(<span style="color:#a2f">type</span><span style="color:#666">=</span><span style="color:#b44">&#39;L1Loss&#39;</span>, loss_weight<span style="color:#666">=</span><span style="color:#666">1.0</span>))))
</code></pre></div><p><code>StandardRoIHead</code> ç±»åŒ…è£…äº† <code>bbox_roi_extractor</code> å’Œ <code>bbox_head</code> çš„å®ä¾‹ï¼Œå‰è€…ç”¨äº RoI ç‰¹å¾æå–ï¼Œåè€…æ‰æ˜¯çœŸæ­£è®¡ç®—åˆ†ç±»å’Œå›å½’çš„é€»è¾‘ã€‚åœ¨ <code>bbox_head</code> ä¸­é™¤äº†ç½‘ç»œæ¨¡å‹æœ‰äº›å˜æ¢å¤–ï¼Œlossè®¡ç®—è¿‡ç¨‹æ˜¯éå¸¸ç±»ä¼¼çš„ï¼Œå…¶ <code>get_targets</code> å’Œ <code>loss</code> è®¡ç®—è¿‡ç¨‹éƒ½æ˜¯å°è£…åœ¨åŸºç±» <code>mmdet/models/roi_heads/bbox_heads/bbox_head.py</code> ä¸­ã€‚</p>
<h3 id="test-1">Test</h3>
<p>æµ‹è¯•æµç¨‹æ˜¯è°ƒç”¨ Head æ¨¡å—çš„ <code>simple_test</code> å’Œ <code>aug_test</code> å‡½æ•°ï¼Œå•å°ºåº¦æµ‹è¯• bbox ç›¸å…³å®ç°ä»£ç åœ¨ <code>mmdet/models/roi_heads/test_mixins.py/BBoxTestMixin</code> çš„ <code>simple_test_bboxes</code> å‡½æ•°ä¸­ã€‚</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#a2f;font-weight:bold">def</span> <span style="color:#00a000">simple_test_bboxes</span>(self,
                       x,
                       <span style="color:#666">...</span>):
    rois <span style="color:#666">=</span> bbox2roi(proposals)
    <span style="color:#080;font-style:italic"># roi æå–+ forwardï¼Œè¾“å‡ºé¢„æµ‹ç»“æœ</span>
    bbox_results <span style="color:#666">=</span> self<span style="color:#666">.</span>_bbox_forward(x, rois)
    cls_score <span style="color:#666">=</span> bbox_results[<span style="color:#b44">&#39;cls_score&#39;</span>]
    bbox_pred <span style="color:#666">=</span> bbox_results[<span style="color:#b44">&#39;bbox_pred&#39;</span>]
    det_bboxes <span style="color:#666">=</span> []
    det_labels <span style="color:#666">=</span> []
    <span style="color:#a2f;font-weight:bold">for</span> i <span style="color:#a2f;font-weight:bold">in</span> <span style="color:#a2f">range</span>(<span style="color:#a2f">len</span>(proposals)):
        <span style="color:#080;font-style:italic"># å¯¹é¢„æµ‹ç»“æœè¿›è¡Œè§£ç è¾“å‡º bbox å’Œå¯¹åº” label</span>
        det_bbox, det_label <span style="color:#666">=</span> self<span style="color:#666">.</span>bbox_head<span style="color:#666">.</span>get_bboxes(<span style="color:#666">...</span>)
        det_bboxes<span style="color:#666">.</span>append(det_bbox)
        det_labels<span style="color:#666">.</span>append(det_label)
    <span style="color:#a2f;font-weight:bold">return</span> det_bboxes, det_labels
</code></pre></div><p>å®é™…ä¸Šä¾ç„¶æ˜¯è°ƒç”¨äº† Head æ¨¡å—å†…éƒ¨çš„ <code>get_bboxes</code> å‡½æ•°ï¼Œå¤„ç†é€»è¾‘å’Œ dense_head å·®ä¸å¤š( è§£ç +è¿˜åŸå°ºåº¦+ nms)ã€‚</p>
<h1 id="conclusion">Conclusion</h1>
<p>æœ¬æ–‡å¯¹æœ€å¤æ‚çš„ Head æ¨¡å—è¿›è¡Œæ·±å…¥è¯¦ç»†è§£è¯»ï¼Œæˆ‘ä»¬åº”è¯¥æŒæ¡ï¼š</p>
<ul>
<li>MMDetection æ¡†æ¶çš„æ•´ä½“è®¾è®¡æ€æƒ³å’Œç®—æ³•æ¨¡å—åˆ’åˆ†åŸåˆ™</li>
<li>MMDetection æ¡†æ¶çš„æ•´ä½“è®­ç»ƒå’Œæµ‹è¯•æµç¨‹</li>
<li>MMDetection æ¡†æ¶æ¯ä¸ªç»„ä»¶çš„è¯¦ç»†ä»£ç å®ç°è¿‡ç¨‹</li>
<li>é’ˆå¯¹ä»»ä½•ä¸€ä¸ªæ–°å¤ç°ä»£ç ï¼Œèƒ½å¤Ÿå¾ˆå¿«ç†è§£ MMDetection æ˜¯å¦‚ä½•é€šè¿‡æ¨¡å—ç»„åˆå®ç°çš„</li>
</ul>
<h1 id="reference">Reference</h1>
<ul>
<li>åŸæ–‡ï¼š<a href="https://zhuanlan.zhihu.com/p/343433169">è½»æ¾æŒæ¡ MMDetection ä¸­ Head æµç¨‹</a></li>
</ul>

    
  </article>
  <div class="paginator">
    
    <a class="link" href="https://preminstrel.github.io/blog/post/2022/01/16/mmdetection-framework/">â† prev</a>
    
    
    <a class="link" href="https://preminstrel.github.io/blog/post/2022/01/26/self-attention/">next â†’</a>
    
  </div>
  <div class="comment">
    
    
    
    
    
    
  </div>
  
</main>

    <footer id="footer">
  <div>
    <span>Â© 2021</span> - <span>2022</span>
  </div>

  <div>
    <span>Powered by </span>
    <a class="link" href="https://gohugo.io/">Hugo</a>
    <span> ğŸ¦ Theme </span>
    <a class="link" href="https://github.com/queensferryme/hugo-theme-texify">TeXify</a>
  </div>

  <div class="footnote">
    <span>Follow me on <a class=link href=https://github.com/preminstrel>GitHub</a>,
<a class=link href=https://twitter.com/preminstrel>Twitter</a> or
<a class=link href=/index.xml>RSS</a> |
<a class=link href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank rel=noopener>CC BY-NC-SA 4.0</a>
</span>
  </div>
</footer>

  </div>

  
  

  
  

  
  

</body>

</html>
